{{/* metadata for an Azure Blob Storage Trigger */}}
{{- define "function.blob" }}
- type: azure-blob
  metadata:
    blobContainerName: {{ .blobContainerName }}
    blobCount: {{ .blobCount | quote }}
    {{- if ne .connection "" }}
    connection: {{ .connection }}
    {{- end }}
    accountName: {{ .accountName | quote }}
    blobPrefix: {{ .blobPrefix | quote }}
    blobDelimiter: {{ .blobDelimiter }}
    {{- if eq .connection "" }}
    authenticationRef:
      name: azure-mi-auth # authenticationRef would need either podIdentity or define a connection parameter
    {{- end }}
{{- end }}